(this["webpackJsonpchordscore-private"]=this["webpackJsonpchordscore-private"]||[]).push([[28],{638:function(e,t,r){"use strict";r.r(t);var n=r(43),a=r.n(n),c=r(60),o=r(0);function u(){var e,t,r=(e=function(e){return e.location.href},"undefined"!==typeof window?e(window):t);if(!(null===r||void 0===r?void 0:r.includes("?")))return{};for(var n=r.split("?")[1],a={},c=("?"===n[0]?n.substr(1):n).split("&"),o=0;o<c.length;o++){var u=c[o].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1]||"")}return a}var s=r(6),i=r(402),p=r.n(i),h=r(61),d=r(23);t.default=function(){var e=Object(s.f)(),t=u();return Object(o.useEffect)((function(){t.code||(alert("\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4."),e.push("/"));var r=function(){var r=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.post("https://kauth.kakao.com/oauth/token",{},{params:{grant_type:"authorization_code",client_id:"1d5d500b8e0b93e7c19c764ab73d07be",redirect_uri:"".concat(window.location.origin,"/auth/kakao"),code:t.code}});case 3:return n=r.sent,c=n.data,r.abrupt("return",c.access_token);case 8:r.prev=8,r.t0=r.catch(0),alert("\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4."),e.push("/");case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}(),n=function(){var t=Object(c.a)(a.a.mark((function t(r){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.post("https://cors-anywhere.herokuapp.com/https://kapi.kakao.com/v2/user/me",{property_keys:["kakao_account.email"]},{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=t.sent,c=n.data,t.abrupt("return",{id:c.id,email:c.kakao_account.email});case 8:t.prev=8,t.t0=t.catch(0),alert("\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4."),e.push("/");case 12:return t.abrupt("return",{id:"",email:""});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(c.a)(a.a.mark((function t(r,n){var c,o,u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("/sns/login",{provider:"kakao",provider_id:r,email:n});case 3:return c=t.sent,o=c.data.data.access_token,u=o.access_token,s=o.refresh_token,t.abrupt("return",{access_token:u,refresh_token:s});case 10:t.prev=10,t.t0=t.catch(0),alert("\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4."),e.push("/");case 14:return t.abrupt("return",{access_token:null,refresh_token:null});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,r){return t.apply(this,arguments)}}(),u=function(){var t=Object(c.a)(a.a.mark((function t(r){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("/user",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=t.sent,c=n.data.data.email,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0),alert("\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4."),e.push("/");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();r().then((function(t){n(t).then((function(t){var r=t.id,n=t.email;return o(r,n).then((function(t){var r=t.access_token,n=t.refresh_token;d.a.setToken(r),d.a.setRefreshToken(n),u(r).then((function(e){return d.a.setEmail(e)})),e.push("/"),window.location.reload()}))}))}))}),[e,t.code]),null}}}]);
//# sourceMappingURL=28.25eeee01.chunk.js.map